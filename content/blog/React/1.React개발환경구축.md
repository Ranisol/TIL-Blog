---
title: React로 사고하기와 react 개발환경 구축하기
date: "2020-10-02"
description: 
---

# 1. React의 Design Principles
[react공식문서 참고 - Design principle](https://ko.reactjs.org/docs/design-principles.html)

# 2. React로 사고하기
[react공식문서 - React로 사고하기](https://ko.reactjs.org/docs/thinking-in-react.html)

## 1단계: UI를 컴포넌트 계층 구조로
다음 목업을
![image](https://ko.reactjs.org/static/1071fbcc9eed01fddc115b41e193ec11/d4770/thinking-in-react-mock.png)

다음의 구조로 나눈다.
![image](https://ko.reactjs.org/static/eb8bda25806a89ebdc838813bdfa3601/6b2ea/thinking-in-react-components.png)

이렇게 컴포넌트 계층 구조로 나누는 데 있어서의 한 가지 기준은 단일 책임 원칙이다.

만일 위 구조를 글로 표현한다면 다음과 같을 것이다.
- 노란색(FilterableProductTable)
  - 파란색(SearchBar)
  - 초록색(ProductTable)
    - 하늘색(ProductCategoryRow)
    - 빨간색(ProductRow)

## 2단계: React로 정적인 버전 만들기
정적 버전을 만들기 위해서는
- 재사용할 컴포넌트를 만들고
- props를 이용해 데이터를 전달해준다.
- 단, state는 오직 상호작용 과정에서 의미있기 때문에, 정적인 버전을 만들 때는 필요 없다.

앱은 상향식, 또는 하향식으로 만들 수 있다.
- 간단한 예시에서는 하향식이 편리하다. (ProductRow부터)
- 하지만 프로젝트가 커지고 테스트를 작성할 필요가 많으면 상향식이 편리하다고 한다.

결과적으로 정적 버전을 만들게 되면 컴포넌트는 render()메서드만 가지고 있을 것이다.

## 3단계: UI state에 대한 최소한의 표현 찾아내기
UI상호작용은 기반 데이터 모델을 변경해야 하는데, react에서는 state를 활용한다.

이렇게 state를 활용할 때는 중복을 가능한 배제해야 한다.
- 예를 들어, todo리스트를 만들 때, state에는 아이템을 저장하는 배열을 값으로 가질 수 있다. 이 때, 개수에 대한 state를 굳이 만들 필요가 없다. 왜냐하면 배열을 가져와서 길이를 측정하면 개수가 얼마인지 나오기 때문이다.

그리고 어떤게 state가 되어야 하는지 결정해야 하는데 있어서 몇가지 질문을 던져볼 수 있다. 공식문서에 따른 예시 질문은 다음과 같다.
- 부모로부터 props를 통해 전달되는지? => 확실히 state가 아님
- 시간이 지나도 변하지 않는지? => state가 아님
- 컴포넌트 안의 다른 state나 props를 가지고 충분히 계산 가능한지? => 그럼 굳이 설정할 필요 없음.

## 4단계: state가 어디에 있어야 할 지 찾기
state를 찾았으면 이 state를 어떤 컴포넌트가 변경하고 소유할지 찾아야 한다. 

이 과정에서 React는 컴포넌트 계층구조를 따라 아래로 흘러가는 단방향 데이터 흐름을 갖는 다는 사실을 숙지할 필요가 있다. 즉, 부모 컴포넌트의 state는 자식의 props가 될 수 있어서 데이터를 흘려보낼 수 있지만, 그 반대는 불가능하다. 이러한 사실을 기반으로 state를 넣을 컴포넌트를 찾아야 한다. 

위 특성을 고려한다면, 특정 state에 따라 변해야 하는 컴포넌트를 모으고 그들의 부모 컴포넌트를 찾을 필요가 있다. 그리고 그 부모 컴포넌트를 `공통 소유 컴포넌트`라고 부른다. 만일, 적절한 부모 컴포넌트가 기존에 없다면, 하나 만들면 된다.
[codepen](https://codepen.io/gaearon/pen/qPrNQZ)

## 5단계: 역방향 데이터 흐름 추가하기
사용자가 컴포넌트에 변화를 줄 때 마다 사용자의 입력을 반영할 수 있도록 state를 업데이트 할 필요가 있다.

만일 그 state가 자신에 있으면 상관없지만, 부모 컴포넌트에 state가 있다면 이를 바꾸는 것이 곤란할 수 있다.

그럴 때는 부모 컴포넌트의 메서드를 자식 컴포넌트에 콜백 형태로 props에 붙여서 전달할 수 있다. 자식 컴포넌트는 이 전달받은 메서드를 이용해 원하는 때에 사용해서 부모 컴포넌트의 state를 변화시킬 수 있는 것이다.
[codepen](https://codepen.io/gaearon/pen/LzWZvb)

# 3. React의 개발환경설정 세션 내용 

## 리엑트 설치하기
npm install --save react react-dom
npm install --save-dev typescript

```js
// package.json
{
    "name":...
    ...
    "dependencies":{
        "react": ...version
        "react-dom": ...version
    }
}
```
## 참고, 타입스크립트 설치 및 설정
npx typescript --init
```js
// tsconfig.json
{ 
    "compilerOptions:{
        "target": "es5", // 타입스크립트를 자바스크립트의 어떤 버전으로 바꿀것인지?
        "module": "CommonJS", // 파일 내보내는 모듈은 어떤걸 사용할것인지
        "strict": true , // 문법 검사 얼마나 빡세게 할 것인지(strict모드)
        "noImplicitAny": true, // type에 any가 들어가지 않도록
        "esModuleInterop": true, // * as 안쓰게 해주는 것... 이건 잘 모르겠음
        "jsx": "react", // tsx가 jsx가 되도록 하는 것. react라고 쓸 수도 있음
        "baseUrl": ".", // 기본 경로를 지정해 줌
        "paths":{   // 경로들의 shortcut을 지정할 수 있음
            "direct/*": ["src/*"]
        }
    }
}
```

## 번들러 설정
번들러란? 파일을 모아주는 역할.

번들러 설정하기 (webpack)
- 밑작업(로더)함
- 파일 번들링 함
- 후속작업 해줌(플러그인)
  - 예를 들면 console.log는 모두 지워준다던가...

번들러 설치
- npm install --save-dev webpack webpack-cli
- npm install @types/react @types/react-dom (타입스크립트는 이 부분도 같이 해줘야 함)

```js
// webpack config.js
module.exports = {
    mode: "development",
    entry: './src/index.tsx', // 파일을 모으는 곳
    output:{
        path: __dirname + '/dist', // 파일을 모아서 dist라는 폴더에
        filename: 'main.js' // main.js라는 파일 이름으로 저장할 것
    },
    resolve:{
        extensions: {'.ts', '.tsx', '.js'} // webpack이 어떤 파일들을 다룰 것인지 설정
    },
    module:{ 
        rules: {
            test: /\.tsx?$/ // ts파일과 tsx파일들을 모두 아래의 로더로 설치해 준다는 뜻. (여기서 정규 표현식 사용)
            loader: "ts-loader" // 로더를 설정하는 부분, 타입스크립트 컴파일러가 적어둠.. npm install --save-dev ts-loader라고 설치해줘야 함.
        }
    }
}
```



# 4. react 빠른시작
https://create-react-app.dev/docs/getting-started/
```
npx create-react-app my-app
cd my-app
npm start
```













