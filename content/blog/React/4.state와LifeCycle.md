---
title: State와 생명주기 개념
date: "2020-10-03"
description: 
---

# 1. state vs props?

state는 props와 비슷하지만, 비공개이고 컴포넌트에 의해 제어가능하다. 

## (1) props를 이용한 경우
```js
class Clock extends React.Component {
  render() {
    return (
      <div>
        <h1>Hello, world!</h1>
        <h2>It is {this.props.date.toLocaleTimeString()}.</h2>
      </div>
    );
  }
}
ReactDOM.render(
    <Clock date = {new Date()}/>,
    document.getElementById('root')
)
```

## (2) props를 state로 바꾸기

state는 클래스의 생성자에서 this.state로 만들어준다. this.state를 사용하는 유일한 곳이다. 다른 부분에서 state에 변형을 가하려면 setState()를 사용해줘야 한다.

동시에 props도 존재하는데, react element를 만들때면 항상 props는 존재해야하는 탓인지, `super(props)`는 언제나 설정해줘야 한다.

```js
class Clock extends React.Component {
  constructor(props) {
    super(props);
    this.state = {date: new Date()};
  }
  render() {
    return (
      <div>
        <h1>Hello, world!</h1>
        <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
      </div>
    );
  }
}
```

## (3) state vs props와 비교
https://lucybain.com/blog/2016/react-state-vs-pros/

https://github.com/uberVU/react-guide/blob/master/props-vs-state.md


# 2. 생명주기
컴포넌트는 어떤 동작을 수행하는 경우가 있다. 타이머의 경우, 매 초, 매 분이 지날때마다 숫자를 바꿔주는 동작이 필요하다.

그런데, 이러한 동작은 컴포넌트가 등장했을 때나 필요하지, 컴포넌트가 사라진 상태에서는 필요없다. 만일 더 이상 필요 없음에도 내부에서는 열심히 일하고 있다면, 리소스를 잡아먹게 된다. 또한 컴포넌트가 등장 전부터 동작할 필요도 없다. 등장 전부터 동작하고 있다면 마찬가지로 프로그램을 더 무겁게 만드는 원인이 된다.

따라서 컴포넌트가 수행해야 할 동작은 등장과 동시에 수행되기 시작하고, 사라짐으로써 동작을 멈춰야만 한다. 이렇게 `컴포넌트의 발생과 변화 소멸, 그에 따른 동작 발생과 멈춤을 컴포넌트의 생명 주기`라고 한다.

![moa](https://media.vlpt.us/post-images/smooth97/0a2ceda0-e26d-11e9-a4c2-fdfd8195e079/image.png)

![ㅁ](https://media.vlpt.us/images/kimu2370/post/53c4d46d-e9e7-43f5-821d-ec58ad982a57/image.png)


## 생명주기 표현하는 메서드
위의 예시에서 컴포넌트에 생명 주기를 표현하기 위해 다음 세 가지 메서드를 추가할 수 있다.

```js
class Clock extends React.Component {
  constructor(props) {
    super(props);
    this.state = {date: new Date()};
  }
  componentDidMount() {
  }
  conponentDidUpdate() {
  }
  componentWillUnmount() {
  }
  render() {
    return (
      <div>
        <h1>Hello, world!</h1>
        <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
      </div>
    );
  }
}
```
이렇게 컴포넌트의 동작을 제어하는 두 메서드를 `생명주기 메서드`라고 부른다.


```js
tick() {
  this.setState({
    date: new Date()
  });
}
```

## (1) 마운트 (화면에 등장 시)
```js
componentDidMount() {
  this.timerID = setInterval(
    () => this.tick(),
    1000
  );
}
```
## (2) 업데이트 (state가 바뀐 후)
```js
componentDidUpdate(){
  console.log('새로운 상태를 가지고 난 후')
}
```


## (3) 언마운트 (화면에서 사라질 때)
```js
componentWillUnmount() {
    clearInterval(this.timerID);
}
```

